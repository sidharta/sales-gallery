<!doctype html>
<html lang="en" ng-app="techGallery" ng-cloak>
<head>
  <meta charset="utf-8">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.png">
  <title>Tech Gallery</title>
  <link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/stylesheets/app.css" />
  <link rel="stylesheet" href="assets/stylesheets/techgallery.css" />

  <script src="https://apis.google.com/js/client.js?onload=init"></script>
  <script src="node_modules/angular/angular.js"></script>
  <script src="node_modules/angular-bootstrap/ui-bootstrap.min.js"></script>
  <script src="node_modules/angular-sanitize/angular-sanitize.min.js"></script>
  <script src="node_modules/angular-route/angular-route.min.js"></script>
  <script src="js/app.js"></script>
  <script src="js/jsUtils.js"></script>
  <script src="js/googleAnalytics.js"></script>
  <script src="js/services.js"></script>
  <script src="js/controllers/techListController.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/directives.js"></script>
</head>
<body ng-controller="techListController">
  <a href="/createTech.html" title="Adicionar Tecnologia" class="btn btn-default btn-circle glyphicon-plus techGalleryFixedLink"></a>
    <nav class="navbar navbar-fixed-top techGalleryFixedBar">
      <div class="container topBar">
        <div class="navbar-header alignBar">
          <a class="navbar-brand" href={{indexPage()}}>
            <img class="logoBar" src="https://storage.googleapis.com/tech-gallery-assets/appLogo/tech-gallery.png">
            <h3 class="headerBar">Tech Gallery</h3>
          </a>
        </div>
        <div id="navbar" class="rightSideBar">
          <div class="navbar-form navbar-right">
            <div class="form-group">
        <form ng-submit="searchTechnology()">
                <input ng-disabled=showLogin type="text" ng-model="textSearch" class="form-control" placeholder="Digite sua busca...">
                <div class="btn-group" dropdown>
                  <button id="single-button" type="button" class="btn btn-default" dropdown-toggle ng-disabled=showLogin>
                    {{ selectedRecommendation==null ? 'Filtrar Por:' : selectedRecommendation }} <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
                    <li role="menuitem" ng-repeat="item in dropDownRecommendation">
                      <a href="#" ng-click="selectRecommendation(item)">{{item}}</a>
                    </li>
                  </ul>
                </div>
                <div class="btn-group" dropdown>
                  <button id="opt" type="button" class="btn btn-default" dropdown-toggle ng-disabled=showLogin>
                    {{ selectedOrderOption==null ? 'Ordenar Por:' : selectedOrderOption }} <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="opt">
                    <li role="menuitem" ng-repeat="item in orderOptions">
                      <a href="#" ng-click="selectOrderOption(item)">{{item}}</a>
                    </li>
                  </ul>
                </div>
                <button ng-disabled=showLogin type="submit" ng-click="searchTechnology()" class="btn btn-default glyphicon glyphicon-search searchButton"/>
                <button ng-disabled=showLogin ng-click="searchClear()" class="btn btn-danger glyphicon glyphicon-remove searchButton" ng-show="textSearch || selectedRecommendation || selectedOrderOption"/>
              </form>
            </div>
            <a ng-show="showLogin && !domainError" href="#" ng-click="login()" class="whiteText">Login <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span></a>
            <a ng-show="domainError || userLogged" href={{logoutRedirect()}} class="whiteText">Logout <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span></a>
          </div>
        </div>
      </div>
    </nav>

    <div class="page-header"></div>

    <div class="container login-Button">
      <h3 ng-show="showLogin && !domainError">Para ter acesso ao conteúdo realize seu login...</h3>
      <h3 ng-show="domainError">{{domainError}}</h3>
    </div>

    <div class="container">
      <a href="" ng-click="searchTechnology(0)">Último Dia</a>
      <a href="" ng-click="searchTechnology(1)">Últimos 7 Dias</a>
      <a href="" ng-click="searchTechnology(2)">Últimos 30 Dias</a>
    </div>

    <div class="container">
      <div ng-show="showLoading">
          <img class="loading" src="/images/loading.gif">
      </div>
        <div>
            <div class="col-sm-6 col-md-3" ng-repeat="tech in techList">
                <div class="thumbnail">
                    <button type="button" id={{generateFollowId(tech.id)}} ng-click="followTechnology(tech.id)" class="btn btn-xs" ng-class="setFollowedClass(tech.followedByUser)">Seguir</button>
                    <div>
                        <button ng-show="isAdmin" type="button" ng-click="deleteTechnology(tech.id)" class="btn btn-danger glyphicon glyphicon-trash btn-xs"></button>
                    </div>
                    <div>
                        <button type="button" ng-click="editTechnology(tech.id)" class="btn btn-danger glyphicon glyphicon-edit btn-xs"></button>
                    </div>
                    <a class="titleThumbnail" href="#" ng-click="redirectToView(tech.id)">
                        <h3>{{tech.name}}</h3>
                    </a>
                    <h5 class="titleThumbnail">{{tech.recommendation}}</h5>
                  <div class="imageSize">
                      <img src={{tech.image}} data-holder-rendered="true"
                          class="thumbnail-Image">
                    </div>
                    <div class="caption">
                        <p class='technologydescription'>{{tech.shortDescription}}</p>
                    </div>
                    <div class="titleThumbnail">
                        <span class="glyphicon glyphicon-thumbs-up"><sup>{{tech.positiveRecommendationsCounter}}</sup></span>
                        <span class="glyphicon glyphicon-thumbs-down"><sup>{{tech.negativeRecommendationsCounter}}</sup></span>
                        <span class="glyphicon glyphicon-user"><sup>{{tech.endorsersCounter}}</sup></span>
                        <span class="glyphicon glyphicon-list-alt"><sup>{{tech.commentariesCounter}}</sup></span>
                    </div>
                    <div class="lastActivities">
                        <span class="lastActivityLabel">Última Atividade:</span>
                        <label>{{tech.lastActivity | date:"dd/MM/yyyy H:mm"}}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!--     <div class="login-Button"> -->
<!--         <h3 ng-show="domainError">{{domainError}}</h3> -->
<!--         <a ng-show="showLogin" href="#" ng-click="login()" -->
<!--             class="btn btn-primary" role="button">Login</a> -->
<!--         <a ng-show="true" href={{logoutRedirect()}} -->
<!--             class="btn btn-danger" role="button">Logout</a> -->
<!--     </div> -->
</body>
